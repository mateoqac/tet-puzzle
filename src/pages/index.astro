---
import BaseLayout from "../layouts/BaseLayout.astro";
import TetPuzzle from "../components/TetPuzzle";
import AdUnit from "../components/AdUnit";
import { generateBeginnerPuzzle } from "../lib/puzzleGenerator";

const puzzle = generateBeginnerPuzzle();

const siteUrl = "https://tetonor.app";
const title = "Tet Puzzle - Free Online Number Logic Game";
const description =
  "Play Tet puzzle online, a challenging number logic game. Match pairs of numbers to create sums and products in this brain-training puzzle. Free to play daily.";
const imageUrl = `${siteUrl}/og-image.png`;

const structuredData = {
  "@context": "https://schema.org",
  "@graph": [
    {
      "@type": "WebApplication",
      "@id": `${siteUrl}/#webapp`,
      name: "Tet Puzzle",
      url: siteUrl,
      description: description,
      applicationCategory: "GameApplication",
      operatingSystem: "Any",
      offers: {
        "@type": "Offer",
        price: "0",
        priceCurrency: "USD",
      },
      browserRequirements: "Requires JavaScript enabled",
      inLanguage: "en-US",
    },
    {
      "@type": "Game",
      "@id": `${siteUrl}/#game`,
      name: "Tet Puzzle",
      description:
        "Tet puzzle is a number logic game where players match pairs of numbers to achieve target sums and products.",
      gamePlatform: ["Web browser", "Mobile browser"],
      genre: ["Puzzle", "Logic", "Mathematics"],
      numberOfPlayers: {
        "@type": "QuantitativeValue",
        value: "1",
      },
      playMode: "SinglePlayer",
    },
    {
      "@type": "FAQPage",
      mainEntity: [
        {
          "@type": "Question",
          name: "What is Tet puzzle?",
          acceptedAnswer: {
            "@type": "Answer",
            text: "Tet puzzle is a number logic game. Players must match pairs of numbers from a pool to fill cells in a grid, where each pair must satisfy both a sum and a product requirement.",
          },
        },
        {
          "@type": "Question",
          name: "How do you play Tet puzzle?",
          acceptedAnswer: {
            "@type": "Answer",
            text: "In Tet puzzle, you are given a grid with cells showing target sums and products. You must select pairs of numbers from the available pool that add up to the sum and multiply to give the product. Each number can only be used once.",
          },
        },
        {
          "@type": "Question",
          name: "What makes Tet puzzle challenging?",
          acceptedAnswer: {
            "@type": "Answer",
            text: "Tet puzzle challenges players with number logic and mathematical reasoning. Each pair of numbers must be used exactly twice - once for addition and once for multiplication.",
          },
        },
      ],
    },
  ],
};
---

<BaseLayout
  title={title}
  description={description}
  canonicalPath="/"
  robots="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1"
>
  <Fragment slot="head">
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content={siteUrl} />
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:image" content={imageUrl} />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta property="og:site_name" content="Tet Puzzle" />
    <meta property="og:locale" content="en_US" />

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:url" content={siteUrl} />
    <meta name="twitter:title" content={title} />
    <meta name="twitter:description" content={description} />
    <meta name="twitter:image" content={imageUrl} />

    <!-- Additional Meta -->
    <meta
      name="keywords"
      content="tet puzzle, number puzzle, logic game, brain teaser, math puzzle, daily puzzle"
    />
    <meta name="author" content="Tet Puzzle" />

    <!-- Structured Data -->
    <script
      type="application/ld+json"
      set:html={JSON.stringify(structuredData)}
    />
  </Fragment>

  <div class="page-layout">
    <aside class="ad-sidebar ad-left" aria-hidden="true">
      <AdUnit client:only="preact" slot="5475429127" />
    </aside>

    <main id="main-content" role="main">
      <header class="visually-hidden">
        <h1>Tet Puzzle - Number Logic Game</h1>
        <p>
          Tet puzzle is a challenging number logic game. The puzzle presents a
          grid where each cell contains a target number. Players must find pairs
          of numbers from a given pool that both add up to the sum and multiply
          to give the product. Each number in the pool can only be used once,
          requiring careful logical deduction to solve the entire grid. This
          online version lets you play Tet puzzles for free, with varying
          difficulty levels from easy to expert.
        </p>
      </header>

      <article itemscope itemtype="https://schema.org/Game">
        <meta itemprop="name" content="Tet Puzzle" />
        <meta itemprop="description" content={description} />
        <TetPuzzle client:load initialPuzzle={puzzle} />
      </article>
    </main>

    <aside class="ad-sidebar ad-right" aria-hidden="true">
      <AdUnit client:only="preact" slot="4102637707" />
    </aside>
  </div>
</BaseLayout>

<style>
  .visually-hidden {
    position: absolute;
    width: 1px;
    height: 1px;
    margin: -1px;
    padding: 0;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
  }

  .page-layout {
    display: flex;
    justify-content: center;
    gap: 2rem;
    max-width: 1400px;
    margin: 0 auto;
  }

  .page-layout main {
    flex: 0 1 auto;
    min-width: 0;
  }

  .ad-sidebar {
    display: none;
    flex-shrink: 0;
    width: 160px;
    align-self: flex-start;
    position: sticky;
    top: 2rem;
  }

  @media (min-width: 1200px) {
    .ad-sidebar {
      display: block;
    }
  }
</style>
